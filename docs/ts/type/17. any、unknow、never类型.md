# &#x20;1. any类型

any类型表示没有任何限制，该类型的变量可以赋值任意类型的值。一旦使用any类型，实际上ts会关闭这个变量的类型检查，即使有明显的类型问题。

```js
let x:any;
x = 1;
x = 'str';
```

应该尽可能避免使用any类型，否则会失去使用ts的初心。

**在实际开发中有两种场合可能会用到any类型**

*   出于特殊情况，需要关闭某个变量的类型。
*   为了适配老项目，迁移到ts上来。

### &#x20;1. 类型推断问题

如果开发者没有进行指定类型，ts会自己推断类型，假如ts推断不出来的会当成any类型来处理。

编译时提供了一个编译选项noImplicitAny，打开此选项，如果被推断成any类型，会直接报错。

```bash
$ tsc --noImplicitAny app.ts
```

**注意点：**

对于let、var声明变量时，**如果不赋值，不添加类型，即使打开了noImplicitAny也不会报错，** 这个要特别记住，const因为声明时必须初始化，所以没有事情。

### &#x20;2. 污染问题

关闭了类型检查，还会造成一个问题就是可能会污染其他变量。他可以赋值给其他类型的变量（因为没有类型检查），就有可能出错，会把错误留到运行时报错。

```js
let x:any = 'hello';
let y:number;

y = x; // 不报错

y * 123 // 不报错
y.toFixed() // 不报错
```

从集合论的角度看，`any`类型可以看成是所有其他类型的全集，包含了一切可能的类型。TypeScript 将这种类型称为“顶层类型”（top type），意为涵盖了所有下层。

# &#x20;2. unknow类型

为了解决any类型会污染其他变量。

它与`any`含义相同，表示类型不确定，可能是任意类型，但是它的使用有一些限制，不像`any`那样自由，可以视为严格版的`any`。

`unknown`跟`any`的相似之处，在于所有类型的值都可以分配给`unknown`类型。

```typescript
let x:unknown;

x = true; // 正确
x = 42; // 正确
x = 'Hello World'; // 正确
```

### 1. 与any类型不同点

*   首先，`unknown`类型的变量，不能直接赋值给其他类型的变量（除了`any`类型和`unknown`类型）。

```typescript
let v:unknown = 123;

let v1:boolean = v; // 报错
let v2:number = v; // 报错
```

*   不能直接调用`unknown`类型变量的方法和属性。

```typescript
let v1:unknown = { foo: 123 };
v1.foo  // 报错

let v2:unknown = 'hello';
v2.trim() // 报错

let v3:unknown = (n = 0) => n + 1;
v3() // 报错
```

*   `unknown`类型变量能够进行的运算是有限的，只能进行比较运算（运算符`==`、`===`、`!=`、`!==`、`||`、`&&`、`?`）、取反运算（运算符`!`）、`typeof`运算符和`instanceof`运算符这几种，其他运算都会报错。

### &#x20;2. 如何使用unknown类型

使用时将类型缩小才能使用，就是缩小类型范围，确保不会出错。

先进行类型判断，再写业务逻辑

```ts
let a:unknown = 1;

if (typeof a === 'number') {
  let r = a + 10; // 正确
}
```

在集合论上，`unknown`也可以视为所有其他类型（除了`any`）的全集，所以它和`any`一样，也属于 TypeScript 的顶层类型。

# &#x20;3. never类型

为了保持与集合论的对应关系，以及类型运算的完整性，TypeScript 还引入了“空类型”的概念，即该类型为空，不包含任何值。

由于不存在任何属于“空类型”的值，所以该类型被称为`never`，即不可能有这样的值。**如果被赋值会报错**

重要特点是，**可以赋值给任意其他类型。**

**为什么`never`类型可以赋值给任意其他类型呢？**

这也跟集合论有关，空集是任何集合的子集。TypeScript 就相应规定，任何类型都包含了`never`类型。因此，`never`类型是任何其他类型所共有的，TypeScript 把这种情况称为“底层类型”（bottom type）。

总之，TypeScript 有两个“顶层类型”（`any`和`unknown`），但是“底层类型”只有`never`唯一一个。
